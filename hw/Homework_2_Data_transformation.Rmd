---
  title: "BIOS 611 HW2 Data transformation (Chapter 5)"
  author: "(name and PID here)"
  date: "`r format(Sys.time(), '%m/%d/%Y')`"
  output: html_document
---
##### Due Date: 09/10/18 (6pm)

  This set of exercise is taken from R for Data Science by Garrett Grolemund and Hadley Wickham but modified slightly for the purpose of this class.

# Exercise 1

Note that the dataset `flights` is from the package `nycflights13`

1.  Find all flights that (Shows all the rows with the following characteristics. Then for each problem, make a variable called 'ans.flight.i' where 'i' is replaced by the subproblem number(1,2,3,...) containing all these rows.)

```{r}
```

    1. Had an arrival delay of two or more hours
```{r}
```

    1. Flew to Houston (`IAH` or `HOU`)
```{r}
```

    1. Were operated by United, American, or Delta
```{r}
```

    1. Departed in summer (July, August, and September)
```{r}
```

    1. Arrived more than two hours late, but didn't leave late
```{r}
```

    1. Were delayed by at least an hour, but made up over 30 minutes in flight
```{r}
```

    1. Departed between midnight and 6am (inclusive)

```{r}
```

2.  Another useful dplyr filtering helper is `between()`. What does it do?
    Can you use it to simplify the code needed to answer the previous 
    challenges? (Write the code using between() for subproblem 7 in the previous problem)

```{r}
```

3.  How many flights have a missing `dep_time`? (Make a varible called "num.flights.missing.dep" for this number) What other variables are 
    missing? (Make a variable called "missing.var" containing the name of these missing varaibles) What might these rows represent?  
  
    Answer:
```{r}
```
    
4.  Why is `NA ^ 0` not missing? Why is `NA | TRUE` not missing?
    Why is `FALSE & NA` not missing? Can you figure out the general
    rule?  (`NA * 0` is a tricky counterexample!)   
      
    (Hint: Think about what NA means and think logically why the expressions above can be evaluated.)
    
    Answer:

```{r}
```

# Exercise 2

1.  How could you use `arrange()` to sort all missing values to the start?
    (Hint: use `is.na()`).  Make a variable called "missing.first" for this sorted tibble.
    
```{r}
```

2.  Sort `flights` to find the most delayed flights.(Make a variable called "delayed.sorted" for this sorted tibble).

```{r}
```

3. Sort `flights` to find the fastest flights (Make a variable called "fastest.flights" containing the rows with the fastest flights in terms of average speed).

```{r}
```

4.  Which flights travelled the longest? Which travelled the shortest? (Make a variable called "longest.flight" and "shortest.flight" for the rows with the longest and shortest flight)

```{r}
```

# Exercise 3

1.Brainstorm as many ways as possible to select `dep_time`, `dep_delay`,
    `arr_time`, and `arr_delay` from `flights`.
    
```{r}
```

2.  What happens if you include the name of a variable multiple times in
    a `select()` call?  
    
    Answer:  
```{r}
```

3.  What does the `one_of()` function do? Why might it be helpful in conjunction
    with this vector?
    
    Answer:  
    ```{r}
    vars <- c("year", "month", "day", "dep_delay", "arr_delay")
    ```
    

# Exercise 4

1.  Currently `dep_time` and `sched_dep_time` are convenient to look at, but
    hard to compute with because they're not really continuous numbers. 
    Convert them to a more convenient representation of number of minutes
    since midnight. (Replace the variable "flights" with this tibble with converted dep_time and sched_dep_time)
    
```{r}
```

2.  Compare `air_time` with `arr_time - dep_time`. What do you expect to see?
    What do you see? What do you need to do to fix it?
      
    Answer:  
```{r}
```

3.  Compare `dep_time`, `sched_dep_time`, and `dep_delay`. How would you
    expect those three numbers to be related?
    
    Answer: 

```{r}
```

4.  Find the 10 most delayed flights using a ranking function.(Name this variable "top.delayed" containing the rows) How do you want 
    to handle ties? Carefully read the documentation for `min_rank()`.
    
    Answer:  

```{r}
```

5.  What does `1:3 + 1:10` return? Why?  
  
    Answer:  
    
```{r}
```


# Exercise 5

1.  Brainstorm at least 3 different ways to assess the typical delay 
    characteristics of a group of flights. Consider the following scenarios:
    
    * A flight is 15 minutes early 50% of the time, and 15 minutes late 50% of 
      the time.
      
    * A flight is always 10 minutes late.

    * A flight is 30 minutes early 50% of the time, and 30 minutes late 50% of 
      the time.
      
    * 99% of the time a flight is on time. 1% of the time it's 2 hours late.
    
    Which is more important: arrival delay or departure delay?  
  (Make 3 similar statements as the ones above using the data we have)
    Answer:  
    
```{r}
```



2.  Look at the number of cancelled flights per day. Is there a pattern?
    Is the proportion of cancelled flights related to the average delay?

   Answer:  
   
```{r}
```

3. Which carrier has the worst delays? 
  
  Answer: 
```{r}
```

4.  What does the `sort` argument to `count()` do. When might you use it?  
  
    Answer: 
    
```{r}
```

# Exercise 6

1.  Which plane (`tailnum`) has the worst on-time record? (Make a variable called "worst.plane" for this plane tail number)

```{r}
```


2. For each destination, compute the total minutes of delay. (Make a tibble called "dest.delayedmin" with these two columns) 
    
```{r}
```

3.  Delays are typically temporally correlated: even once the problem that
    caused the initial delay has been resolved, later flights are delayed 
    to allow earlier flights to leave. Using `lag()`, explore how the delay
    of a flight is related to the delay of the immediately preceding flight.
(What proportion of delayed flights is caused by the delay of the immediately preceding flights)  
  
  Answer: 
  
```{r}
```


4. Find all destinations that are flown by at least two carriers. (Put these destinations into a variable called "popular.destinations")

```{r}
```

5.  For each plane, count the number of flights before the first delay 
    of greater than 1 hour. (Make a tibble called "plane.num.before.first.delay" with these two columns)
```{r}
```

